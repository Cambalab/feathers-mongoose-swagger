{"version":3,"sources":["webpack:///webpack/bootstrap dc823809e4f407575280","webpack:///external \"lodash\"","webpack:///external \"path\"","webpack:///external \"babel-runtime/core-js/promise\"","webpack:///external \"babel-runtime/regenerator\"","webpack:///./lib/utils.js","webpack:///external \"co\"","webpack:///external \"fs-extra\"","webpack:///external \"pify\"","webpack:///external \"babel-runtime/core-js/json/stringify\"","webpack:///external \"babel-runtime/helpers/typeof\"","webpack:///external \"debug\"","webpack:///external \"webpack\"","webpack:///external \"babel-runtime/helpers/classCallCheck\"","webpack:///external \"babel-runtime/helpers/createClass\"","webpack:///external \"serialize-javascript\"","webpack:///./lib/webpack/base.config.js","webpack:///external \"babel-runtime/core-js/object/assign\"","webpack:///external \"babel-runtime/core-js/object/keys\"","webpack:///external \"extract-text-webpack-plugin\"","webpack:///./lib/build.js","webpack:///./lib/generate.js","webpack:///./lib/render.js","webpack:///./lib/server.js","webpack:///external \"ansi-html\"","webpack:///external \"serve-static\"","webpack:///./lib/webpack/client.config.js","webpack:///./lib/webpack/server.config.js","webpack:///./lib/webpack/vue-loader.config.js","webpack:///./package.json","webpack:///external \"autoprefixer\"","webpack:///external \"babel-runtime/core-js/array/from\"","webpack:///external \"chokidar\"","webpack:///external \"fs\"","webpack:///external \"glob\"","webpack:///external \"hash-sum\"","webpack:///external \"html-minifier\"","webpack:///external \"http\"","webpack:///external \"jsdom\"","webpack:///external \"lru-cache\"","webpack:///external \"memory-fs\"","webpack:///external \"path-to-regexp\"","webpack:///external \"progress-bar-webpack-plugin\"","webpack:///external \"vue-server-renderer\"","webpack:///external \"webpack-bundle-analyzer\"","webpack:///external \"webpack-dev-middleware\"","webpack:///external \"webpack-hot-middleware\"","webpack:///./lib/nuxt.js"],"names":["waitFor","encodeHtml","str","replace","getContext","req","res","setAnsiColors","ansiHTML","setColors","reset","darkgrey","yellow","green","magenta","blue","cyan","red","ms","resolve","setTimeout","urlJoin","slice","call","arguments","join","promisifyRouteParams","fn","Array","isArray","length","reject","err","routeParams","promise","isClient","isServer","nodeModulesDir","__dirname","config","devtool","entry","vendor","output","publicPath","options","router","base","performance","hints","dev","extensions","alias","srcDir","dir","modules","resolveLoader","module","rules","test","loader","query","vueLoaderConfig","exclude","defaults","build","babel","plugins","presets","cacheDirectory","concat","loaders","buildFiles","generateRoutesAndFiles","debug","require","remove","pify","fs","readFile","writeFile","mkdirp","glob","reqSep","sysSep","_","escapeRegExp","normalize","string","wp","p","process","platform","r","args","last","includes","map","apply","color","analyze","filenames","css","app","postcss","defaultsLoaders","limit","name","defaultsPostcss","browsers","extraDefaults","defaultsDeep","serverConfig","getWebpackServerConfig","bundlePath","path","filename","existsSync","bundle","readFileSync","createRenderer","console","error","exit","createWebpackMiddleware","webpackWatchAndUpdate","watchPages","webpackRunClient","webpackRunServer","layouts","cwd","layoutsFiles","forEach","file","split","files","routes","uniq","extendRoutes","templatesFiles","templateVars","uniqBy","isDev","middleware","linkActiveClass","scrollBehavior","env","head","store","appPath","loading","transition","components","ErrorPage","createRoutes","default","push","moveTemplates","then","fileContent","template","imports","serialize","hash","content","keys","route","component","parent","key","i","child","find","children","indexOf","sort","a","b","_a","_b","y","z","cleanChildrenRoutes","isChild","start","routesIndex","s","names","paths","shift","getWebpackClientConfig","clientWebpackConfig","serverWebpackConfig","clientConfig","flatten","webpack","HotModuleReplacementPlugin","NoEmitOnErrorsPlugin","clientCompiler","webpackDevMiddleware","stats","colors","chunks","quiet","noInfo","webpackHotMiddleware","MFS","mfs","serverCompiler","outputPath","outputFileSystem","webpackServerWatcher","watch","toJson","errors","warnings","warn","run","log","toString","hasErrors","cacheConfig","cache","max","maxAge","renderer","createBundleRenderer","renderToString","renderToStream","patterns","ignoreInitial","refreshFiles","debounce","d","Date","now","co","bind","pagesFilesWatcher","chokidar","on","copy","generate","self","srcStaticPath","srcBuiltPath","distPath","distNuxtPath","resolveRouteParams","toPath","pathToRegexp","compile","params","splice","renderRoute","_generate","html","minify","collapseBooleanAttributes","collapseWhitespace","decodeEntities","minifyCSS","minifyJS","processConditionalComments","removeAttributeQuotes","removeComments","removeEmptyAttributes","removeOptionalTags","removeRedundantAttributes","removeScriptTypeAttributes","removeStyleLinkTypeAttributes","removeTagWhitespace","sortAttributes","sortClassName","trimCustomFragments","useShortDoctype","dirname","pages","nojekyllPath","duration","Math","round","promises","routePath","routeParamsData","catch","e","all","render","context","url","serveStatic","_nuxtRegexp","serveStaticNuxt","statusCode","end","nuxt","setHeader","Buffer","byteLength","errorTemplate","serverRendered","appTemplate","baseUrl","APP","redirected","jsdom","renderAndGetWindow","opts","virtualConsole","createVirtualConsole","sendTo","undefined","features","FetchExternalResources","ProcessExternalResources","done","window","scrollTo","__NUXT__","message","body","document","getElementsByTagName","innerHTML","onNuxtReady","http","Server","server","createServer","port","host","listen","cb","close","each","value","DefinePlugin","optimize","CommonsChunkPlugin","allChunks","LoaderOptionsPlugin","minimize","UglifyJsPlugin","compress","extend","target","libraryTarget","nuxtPackageJson","projectPackageJsonPath","externals","dependencies","projectPackageJson","JSON","parse","babelOptions","preserveWhitespace","ExtractTextPlugin","extract","scss","fallbackLoader","sass","stylus","less","Nuxt","failedColor","height","mode","rootDir","utils","callback"],"mappings":"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","file":"nuxt.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 46);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap dc823809e4f407575280","module.exports = require(\"lodash\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"babel-runtime/core-js/promise\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/core-js/promise\"\n// module id = 2\n// module chunks = 0","module.exports = require(\"babel-runtime/regenerator\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/regenerator\"\n// module id = 3\n// module chunks = 0","'use strict'\n\nexport function encodeHtml (str) {\n  return str.replace(/</g, '&lt;').replace(/>/g, '&gt;')\n}\n\nexport function getContext (req, res) {\n  return { req, res }\n}\n\nexport function setAnsiColors (ansiHTML) {\n  ansiHTML.setColors({\n    reset: ['efefef', 'a6004c'],\n    darkgrey: '5a012b',\n    yellow: 'ffab07',\n    green: 'aeefba',\n    magenta: 'ff84bf',\n    blue: '3505a0',\n    cyan: '56eaec',\n    red: '4e053a'\n  })\n}\n\nexport function * waitFor (ms) {\n  return new Promise(function (resolve) {\n    setTimeout(resolve, (ms || 0))\n  })\n}\n\nexport function urlJoin () {\n  return [].slice.call(arguments).join('/').replace(/\\/+/g, '/')\n}\n\nexport function promisifyRouteParams (fn) {\n  // If routeParams[route] is an array\n  if (Array.isArray(fn)) {\n    return Promise.resolve(fn)\n  }\n  // If routeParams[route] is a function expecting a callback\n  if (fn.length === 1) {\n    return new Promise((resolve, reject) => {\n      fn(function (err, routeParams) {\n        if (err) {\n          reject(err)\n        }\n        resolve(routeParams)\n      })\n    })\n  }\n  let promise = fn()\n  if (!(promise instanceof Promise)) {\n    promise = Promise.resolve(promise)\n  }\n  return promise\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/utils.js","module.exports = require(\"co\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"co\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"fs-extra\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs-extra\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"pify\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"pify\"\n// module id = 7\n// module chunks = 0","module.exports = require(\"babel-runtime/core-js/json/stringify\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/core-js/json/stringify\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"babel-runtime/helpers/typeof\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/typeof\"\n// module id = 9\n// module chunks = 0","module.exports = require(\"debug\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"debug\"\n// module id = 10\n// module chunks = 0","module.exports = require(\"webpack\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webpack\"\n// module id = 11\n// module chunks = 0","module.exports = require(\"babel-runtime/helpers/classCallCheck\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/classCallCheck\"\n// module id = 12\n// module chunks = 0","module.exports = require(\"babel-runtime/helpers/createClass\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/createClass\"\n// module id = 13\n// module chunks = 0","module.exports = require(\"serialize-javascript\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"serialize-javascript\"\n// module id = 14\n// module chunks = 0","'use strict'\n\nimport vueLoaderConfig from './vue-loader.config'\nimport { defaults } from 'lodash'\nimport { join } from 'path'\nimport { urlJoin } from '../utils'\n\n/*\n|--------------------------------------------------------------------------\n| Webpack Shared Config\n|\n| This is the config which is extended by the server and client\n| webpack config files\n|--------------------------------------------------------------------------\n*/\nexport default function ({ isClient, isServer }) {\n  const nodeModulesDir = join(__dirname, '..', 'node_modules')\n  let config = {\n    devtool: 'source-map',\n    entry: {\n      vendor: ['vue', 'vue-router', 'vue-meta']\n    },\n    output: {\n      publicPath: urlJoin(this.options.router.base, '/_nuxt/')\n    },\n    performance: {\n      hints: (this.dev ? false : 'warning')\n    },\n    resolve: {\n      extensions: ['.js', '.json', '.vue'],\n      // Disable for now\n      alias: {\n        '~': join(this.srcDir),\n        'static': join(this.srcDir, 'static'), // use in template with <img src=\"~static/nuxt.png\" />\n        '~static': join(this.srcDir, 'static'),\n        'assets': join(this.srcDir, 'assets'), // use in template with <img src=\"~static/nuxt.png\" />\n        '~assets': join(this.srcDir, 'assets'),\n        '~plugins': join(this.srcDir, 'plugins'),\n        '~store': join(this.dir, '.nuxt/store'),\n        '~router': join(this.dir, '.nuxt/router'),\n        '~pages': join(this.srcDir, 'pages'),\n        '~components': join(this.srcDir, 'components')\n      },\n      modules: [\n        nodeModulesDir,\n        join(this.dir, 'node_modules')\n      ]\n    },\n    resolveLoader: {\n      modules: [\n        nodeModulesDir,\n        join(this.dir, 'node_modules')\n      ]\n    },\n    module: {\n      rules: [\n        {\n          test: /\\.vue$/,\n          loader: 'vue-loader',\n          query: vueLoaderConfig.call(this, { isClient, isServer })\n        },\n        {\n          test: /\\.js$/,\n          loader: 'babel-loader',\n          exclude: /node_modules/,\n          query: defaults(this.options.build.babel, {\n            plugins: [\n              'transform-async-to-generator',\n              'transform-runtime'\n            ],\n            presets: [\n              ['es2015', { modules: false }],\n              'stage-2'\n            ],\n            cacheDirectory: !!this.dev\n          })\n        }\n      ]\n    },\n    plugins: this.options.build.plugins\n  }\n  // Add nuxt build loaders (can be configured in nuxt.config.js)\n  config.module.rules = config.module.rules.concat(this.options.build.loaders)\n  // Return config\n  return config\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/webpack/base.config.js","module.exports = require(\"babel-runtime/core-js/object/assign\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/core-js/object/assign\"\n// module id = 16\n// module chunks = 0","module.exports = require(\"babel-runtime/core-js/object/keys\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/core-js/object/keys\"\n// module id = 17\n// module chunks = 0","module.exports = require(\"extract-text-webpack-plugin\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"extract-text-webpack-plugin\"\n// module id = 18\n// module chunks = 0","'use strict'\n\nconst debug = require('debug')('nuxt:build')\nimport _ from 'lodash'\nimport co from 'co'\nimport chokidar from 'chokidar'\nimport fs from 'fs-extra'\nimport hash from 'hash-sum'\nimport pify from 'pify'\nimport webpack from 'webpack'\nimport serialize from 'serialize-javascript'\nimport { createBundleRenderer } from 'vue-server-renderer'\nimport { join, resolve, sep } from 'path'\nimport clientWebpackConfig from './webpack/client.config.js'\nimport serverWebpackConfig from './webpack/server.config.js'\nconst remove = pify(fs.remove)\nconst readFile = pify(fs.readFile)\nconst writeFile = pify(fs.writeFile)\nconst mkdirp = pify(fs.mkdirp)\nconst glob = pify(require('glob'))\nconst reqSep = /\\//g\nconst sysSep = _.escapeRegExp(sep)\nconst normalize = string => string.replace(reqSep, sysSep)\nconst wp = function (p) {\n  /* istanbul ignore if */\n  if (/^win/.test(process.platform)) {\n    p = p.replace(/\\\\/g, '\\\\\\\\')\n  }\n  return p\n}\nconst r = function () {\n  let args = Array.from(arguments)\n  if (_.last(args).includes('~')) {\n    return wp(_.last(args))\n  }\n  args = args.map(normalize)\n  return wp(resolve.apply(null, args))\n}\n// force green color\ndebug.color = 2\n\nconst defaults = {\n  analyze: false,\n  filenames: {\n    css: 'style.css',\n    vendor: 'vendor.bundle.js',\n    app: 'nuxt.bundle.js'\n  },\n  vendor: [],\n  loaders: [],\n  plugins: [],\n  babel: {},\n  postcss: []\n}\nconst defaultsLoaders = [\n  {\n    test: /\\.(png|jpe?g|gif|svg)$/,\n    loader: 'url-loader',\n    query: {\n      limit: 1000, // 1KO\n      name: 'img/[name].[hash:7].[ext]'\n    }\n  },\n  {\n    test: /\\.(woff2?|eot|ttf|otf)(\\?.*)?$/,\n    loader: 'url-loader',\n    query: {\n      limit: 1000, // 1 KO\n      name: 'fonts/[name].[hash:7].[ext]'\n    }\n  }\n]\nconst defaultsPostcss = [\n  require('autoprefixer')({\n    browsers: ['last 3 versions']\n  })\n]\n\nexport function options () {\n  // Defaults build options\n  let extraDefaults = {}\n  if (this.options.build && !Array.isArray(this.options.build.loaders)) extraDefaults.loaders = defaultsLoaders\n  if (this.options.build && !Array.isArray(this.options.build.postcss)) extraDefaults.postcss = defaultsPostcss\n  this.options.build = _.defaultsDeep(this.options.build, defaults, extraDefaults)\n  // Production, create server-renderer\n  if (!this.dev) {\n    const serverConfig = getWebpackServerConfig.call(this)\n    const bundlePath = join(serverConfig.output.path, serverConfig.output.filename)\n    if (fs.existsSync(bundlePath)) {\n      const bundle = fs.readFileSync(bundlePath, 'utf8')\n      createRenderer.call(this, bundle)\n    }\n  }\n}\n\nexport function * build () {\n  // Check if pages dir exists and warn if not\n  if (!fs.existsSync(join(this.srcDir, 'pages'))) {\n    if (fs.existsSync(join(this.srcDir, '..', 'pages'))) {\n      console.error('> No `pages` directory found. Did you mean to run `nuxt` in the parent (`../`) directory?')  // eslint-disable-line no-console\n    } else {\n      console.error('> Couldn\\'t find a `pages` directory. Please create one under the project root') // eslint-disable-line no-console\n    }\n    process.exit(1)\n  }\n  debug(`App root: ${this.srcDir}`)\n  debug('Generating .nuxt/ files...')\n  // Create .nuxt/, .nuxt/components and .nuxt/dist folders\n  yield remove(r(this.dir, '.nuxt'))\n  yield mkdirp(r(this.dir, '.nuxt/components'))\n  if (!this.dev) {\n    yield mkdirp(r(this.dir, '.nuxt/dist'))\n  }\n  // Generate routes and interpret the template files\n  yield generateRoutesAndFiles.call(this)\n  // Generate .nuxt/dist/ files\n  yield buildFiles.call(this)\n  return this\n}\n\nfunction * buildFiles () {\n  if (this.dev) {\n    debug('Adding webpack middleware...')\n    createWebpackMiddleware.call(this)\n    webpackWatchAndUpdate.call(this)\n    watchPages.call(this)\n  } else {\n    debug('Building files...')\n    yield [\n      webpackRunClient.call(this),\n      webpackRunServer.call(this)\n    ]\n  }\n}\n\nfunction * generateRoutesAndFiles () {\n  debug('Generating routes...')\n  // Layouts\n  let layouts = {}\n  const layoutsFiles = yield glob('layouts/*.vue', { cwd: this.srcDir })\n  layoutsFiles.forEach((file) => {\n    let name = file.split('/').slice(-1)[0].replace('.vue', '')\n    if (name === 'error') return\n    layouts[name] = r(this.srcDir, file)\n  })\n  // Generate routes based on files\n  const files = yield glob('pages/**/*.vue', { cwd: this.srcDir })\n  this.routes = _.uniq(_.map(files, (file) => {\n    return file.replace(/^pages/, '').replace(/\\.vue$/, '').replace(/\\/index/g, '').replace(/_/g, ':').replace('', '/').replace(/\\/{2,}/g, '/')\n  }))\n  if (typeof this.options.router.extendRoutes === 'function') {\n    // let the user extend the routes\n    this.options.router.extendRoutes(this.routes)\n  }\n  // Interpret and move template files to .nuxt/\n  debug('Generating files...')\n  let templatesFiles = [\n    'App.vue',\n    'client.js',\n    'index.js',\n    'middleware.js',\n    'router.js',\n    'server.js',\n    'utils.js',\n    'components/nuxt-error.vue',\n    'components/nuxt-loading.vue',\n    'components/nuxt-child.js',\n    'components/nuxt-link.js',\n    'components/nuxt.vue'\n  ]\n  let templateVars = {\n    uniqBy: _.uniqBy,\n    isDev: this.dev,\n    router: {\n      base: this.options.router.base,\n      middleware: this.options.router.middleware,\n      linkActiveClass: this.options.router.linkActiveClass,\n      scrollBehavior: this.options.router.scrollBehavior\n    },\n    env: this.options.env,\n    head: this.options.head,\n    middleware: this.options.middleware,\n    store: this.options.store,\n    css: this.options.css,\n    plugins: this.options.plugins.map((p) => r(this.srcDir, p)),\n    appPath: './App.vue',\n    layouts: layouts,\n    loading: (typeof this.options.loading === 'string' ? r(this.srcDir, this.options.loading) : this.options.loading),\n    transition: this.options.transition,\n    components: {\n      ErrorPage: './nuxt-error.vue'\n    }\n  }\n  // Format routes for the lib/app/router.js template\n  templateVars.router.routes = createRoutes(files, this.srcDir)\n  if (typeof this.options.router.extendRoutes === 'function') {\n    // let the user extend the routes\n    this.options.router.extendRoutes(templateVars.router.routes)\n  }\n  if (layoutsFiles.includes('layouts/error.vue')) {\n    templateVars.components.ErrorPage = r(this.srcDir, 'layouts/error.vue')\n  }\n  // If no default layout, create its folder and add the default folder\n  if (!layouts.default) {\n    yield mkdirp(r(this.dir, '.nuxt/layouts'))\n    templatesFiles.push('layouts/default.vue')\n    layouts.default = r(__dirname, 'app', 'layouts', 'default.vue')\n  }\n  // Add store if needed\n  if (this.options.store) {\n    templatesFiles.push('store.js')\n  }\n  let moveTemplates = templatesFiles.map((file) => {\n    return readFile(r(__dirname, 'app', file), 'utf8')\n    .then((fileContent) => {\n      const template = _.template(fileContent, {\n        imports: {\n          serialize,\n          hash\n        }\n      })\n      const content = template(templateVars)\n      return writeFile(r(this.dir, '.nuxt', file), content, 'utf8')\n    })\n  })\n  yield moveTemplates\n}\n\nfunction createRoutes (files, srcDir) {\n  let routes = []\n  files.forEach((file) => {\n    let keys = file.replace(/^pages/, '').replace(/\\.vue$/, '').replace(/\\/{2,}/g, '/').split('/').slice(1)\n    let route = { name: '', path: '', component: r(srcDir, file) }\n    let parent = routes\n    keys.forEach((key, i) => {\n      route.name = route.name ? route.name + '-' + key.replace('_', '') : key.replace('_', '')\n      route.name += (key === '_') ? 'all' : ''\n      let child = _.find(parent, { name: route.name })\n      if (child) {\n        if (!child.children) {\n          child.children = []\n        }\n        parent = child.children\n        route.path = ''\n      } else {\n        if (key === 'index' && (i + 1) === keys.length) {\n          route.path += (i > 0 ? '' : '/')\n        } else {\n          route.path += '/' + (key === '_' ? '*' : key.replace('_', ':'))\n          if (key !== '_' && key.indexOf('_') !== -1) {\n            route.path += '?'\n          }\n        }\n      }\n    })\n    // Order Routes path\n    parent.push(route)\n    parent.sort((a, b) => {\n      if (!a.path.length || a.path === '/') { return -1 }\n      if (!b.path.length || b.path === '/') { return 1 }\n      var res = 0\n      var _a = a.path.split('/')\n      var _b = b.path.split('/')\n      for (var i = 0; i < _a.length; i++) {\n        if (res !== 0) { break }\n        var y = (_a[i].indexOf('*') > -1) ? 2 : (_a[i].indexOf(':') > -1 ? 1 : 0)\n        var z = (_b[i].indexOf('*') > -1) ? 2 : (_b[i].indexOf(':') > -1 ? 1 : 0)\n        res = y - z\n        if (i === _b.length - 1 && res === 0) {\n          res = 1\n        }\n      }\n      return res === 0 ? -1 : res\n    })\n  })\n  return cleanChildrenRoutes(routes)\n}\n\nfunction cleanChildrenRoutes (routes, isChild = false) {\n  let start = -1\n  let routesIndex = []\n  routes.forEach((route) => {\n    if (/-index$/.test(route.name) || route.name === 'index') {\n      // Save indexOf 'index' key in name\n      let res = route.name.split('-')\n      let s = res.indexOf('index')\n      start = (start === -1 || s < start) ? s : start\n      routesIndex.push(res)\n    }\n  })\n  routes.forEach((route) => {\n    route.path = (isChild) ? route.path.replace('/', '') : route.path\n    if (route.path.indexOf('?') > -1) {\n      let names = route.name.split('-')\n      let paths = route.path.split('/')\n      if (!isChild) { paths.shift() } // clean first / for parents\n      routesIndex.forEach((r) => {\n        let i = r.indexOf('index') - start //  children names\n        if (i < paths.length) {\n          for (var a = 0; a <= i; a++) {\n            if (a === i) { paths[a] = paths[a].replace('?', '') }\n            if (a < i && names[a] !== r[a]) { break }\n          }\n        }\n      })\n      route.path = (isChild ? '' : '/') + paths.join('/')\n    }\n    route.name = route.name.replace(/-index$/, '')\n    if (route.children) {\n      if (route.children.find((child) => child.path === '')) {\n        delete route.name\n      }\n      route.children = cleanChildrenRoutes(route.children, true)\n    }\n  })\n  return routes\n}\n\nfunction getWebpackClientConfig () {\n  return clientWebpackConfig.call(this)\n}\n\nfunction getWebpackServerConfig () {\n  return serverWebpackConfig.call(this)\n}\n\nfunction createWebpackMiddleware () {\n  const clientConfig = getWebpackClientConfig.call(this)\n  // setup on the fly compilation + hot-reload\n  clientConfig.entry.app = _.flatten(['webpack-hot-middleware/client?reload=true', clientConfig.entry.app])\n  clientConfig.plugins.push(\n    new webpack.HotModuleReplacementPlugin(),\n    new webpack.NoEmitOnErrorsPlugin()\n  )\n  const clientCompiler = webpack(clientConfig)\n  // Add the middleware to the instance context\n  this.webpackDevMiddleware = pify(require('webpack-dev-middleware')(clientCompiler, {\n    publicPath: clientConfig.output.publicPath,\n    stats: {\n      colors: true,\n      chunks: false\n    },\n    quiet: false,\n    noInfo: true\n  }))\n  this.webpackHotMiddleware = pify(require('webpack-hot-middleware')(clientCompiler))\n}\n\nfunction webpackWatchAndUpdate () {\n  const MFS = require('memory-fs') // <- dependencies of webpack\n  const mfs = new MFS()\n  const serverConfig = getWebpackServerConfig.call(this)\n  const serverCompiler = webpack(serverConfig)\n  const outputPath = join(serverConfig.output.path, serverConfig.output.filename)\n  serverCompiler.outputFileSystem = mfs\n  this.webpackServerWatcher = serverCompiler.watch({}, (err, stats) => {\n    if (err) throw err\n    stats = stats.toJson()\n    stats.errors.forEach(err => console.error(err)) // eslint-disable-line no-console\n    stats.warnings.forEach(err => console.warn(err)) // eslint-disable-line no-console\n    createRenderer.call(this, mfs.readFileSync(outputPath, 'utf-8'))\n  })\n}\n\nfunction webpackRunClient () {\n  return new Promise((resolve, reject) => {\n    const clientConfig = getWebpackClientConfig.call(this)\n    const serverCompiler = webpack(clientConfig)\n    serverCompiler.run((err, stats) => {\n      if (err) return reject(err)\n      console.log('[nuxt:build:client]\\n', stats.toString({ chunks: false, colors: true })) // eslint-disable-line no-console\n      if (stats.hasErrors()) return reject('Webpack build exited with errors')\n      resolve()\n    })\n  })\n}\n\nfunction webpackRunServer () {\n  return new Promise((resolve, reject) => {\n    const serverConfig = getWebpackServerConfig.call(this)\n    const serverCompiler = webpack(serverConfig)\n    serverCompiler.run((err, stats) => {\n      if (err) return reject(err)\n      console.log('[nuxt:build:server]\\n', stats.toString({ chunks: false, colors: true })) // eslint-disable-line no-console\n      if (stats.hasErrors()) return reject('Webpack build exited with errors')\n      const bundlePath = join(serverConfig.output.path, serverConfig.output.filename)\n      readFile(bundlePath, 'utf8')\n      .then((bundle) => {\n        createRenderer.call(this, bundle)\n        resolve()\n      })\n    })\n  })\n}\n\nfunction createRenderer (bundle) {\n  // Create bundle renderer to give a fresh context for every request\n  let cacheConfig = false\n  if (this.options.cache) {\n    this.options.cache = (typeof this.options.cache !== 'object' ? {} : this.options.cache)\n    cacheConfig = require('lru-cache')(_.defaults(this.options.cache, {\n      max: 1000,\n      maxAge: 1000 * 60 * 15\n    }))\n  }\n  this.renderer = createBundleRenderer(bundle, {\n    cache: cacheConfig\n  })\n  this.renderToString = pify(this.renderer.renderToString)\n  this.renderToStream = this.renderer.renderToStream\n}\n\nfunction watchPages () {\n  const patterns = [\n    r(this.srcDir, 'pages'),\n    r(this.srcDir, 'pages/*.vue'),\n    r(this.srcDir, 'pages/**/*.vue'),\n    r(this.srcDir, 'layouts'),\n    r(this.srcDir, 'layouts/*.vue'),\n    r(this.srcDir, 'layouts/**/*.vue')\n  ]\n  const options = {\n    ignoreInitial: true\n  }\n  /* istanbul ignore next */\n  const refreshFiles = _.debounce(() => {\n    var d = Date.now()\n    co(generateRoutesAndFiles.bind(this))\n    .then(() => {\n      console.log('Time to gen:' + (Date.now() - d) + 'ms') // eslint-disable-line no-console\n    })\n  }, 200)\n  this.pagesFilesWatcher = chokidar.watch(patterns, options)\n  .on('add', refreshFiles)\n  .on('unlink', refreshFiles)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/build.js","'use strict'\n\nconst debug = require('debug')('nuxt:generate')\nimport fs from 'fs-extra'\nimport co from 'co'\nimport pify from 'pify'\nimport pathToRegexp from 'path-to-regexp'\nimport _ from 'lodash'\nimport { resolve, join, dirname, sep } from 'path'\nimport { promisifyRouteParams } from './utils'\nimport { minify } from 'html-minifier'\nconst copy = pify(fs.copy)\nconst remove = pify(fs.remove)\nconst writeFile = pify(fs.writeFile)\nconst mkdirp = pify(fs.mkdirp)\n\nconst defaults = {\n  dir: 'dist',\n  routeParams: {}\n}\n\nexport default function () {\n  const s = Date.now()\n  /*\n  ** Update loaders config to add router.base path\n  */\n  // this.options.build.loaders.forEach((config) => {\n  //   if (['file', 'url', 'file-loader', 'url-loader'].includes(config.loader)) {\n  //     config.query = config.query || {}\n  //     config.query.publicPath = urlJoin(this.options.router.base, '/_nuxt/')\n  //   }\n  // })\n  /*\n  ** Set variables\n  */\n  this.options.generate = _.defaultsDeep(this.options.generate, defaults)\n  var self = this\n  var srcStaticPath = resolve(this.srcDir, 'static')\n  var srcBuiltPath = resolve(this.dir, '.nuxt', 'dist')\n  var distPath = resolve(this.dir, this.options.generate.dir)\n  var distNuxtPath = resolve(distPath, '_nuxt')\n  return co(function * () {\n    /*\n    ** Launch build process\n    */\n    yield self.build()\n    /*\n    ** Clean destination folder\n    */\n    try {\n      yield remove(distPath)\n      debug('Destination folder cleaned')\n    } catch (e) {}\n    /*\n    ** Copy static and built files\n    */\n    if (fs.existsSync(srcStaticPath)) {\n      yield copy(srcStaticPath, distPath)\n    }\n    yield copy(srcBuiltPath, distNuxtPath)\n    debug('Static & build files copied')\n  })\n  .then(() => {\n    // Resolve config.generate.routesParams promises before generating the routes\n    return resolveRouteParams(this.options.generate.routeParams)\n  })\n  .then(() => {\n    /*\n    ** Generate html files from routes\n    */\n    let routes = []\n    this.routes.forEach((route) => {\n      if (route.includes(':') || route.includes('*')) {\n        const routeParams = this.options.generate.routeParams[route]\n        if (!routeParams) {\n          console.error(`Could not generate the dynamic route ${route}, please add the mapping params in nuxt.config.js (generate.routeParams).`) // eslint-disable-line no-console\n          return process.exit(1)\n        }\n        route = route + '?'\n        const toPath = pathToRegexp.compile(route)\n        routes = routes.concat(routeParams.map((params) => {\n          return toPath(params)\n        }))\n      } else {\n        routes.push(route)\n      }\n    })\n    return co(function * () {\n      while (routes.length) {\n        yield routes.splice(0, 500).map((route) => {\n          return co(function * () {\n            var { html } = yield self.renderRoute(route, { _generate: true })\n            html = minify(html, {\n              collapseBooleanAttributes: true,\n              collapseWhitespace: true,\n              decodeEntities: true,\n              minifyCSS: true,\n              minifyJS: true,\n              processConditionalComments: true,\n              removeAttributeQuotes: false,\n              removeComments: false,\n              removeEmptyAttributes: true,\n              removeOptionalTags: true,\n              removeRedundantAttributes: true,\n              removeScriptTypeAttributes: true,\n              removeStyleLinkTypeAttributes: true,\n              removeTagWhitespace: true,\n              sortAttributes: true,\n              sortClassName: true,\n              trimCustomFragments: true,\n              useShortDoctype: true\n            })\n            var path = join(route, sep, 'index.html') // /about -> /about/index.html\n            debug('Generate file: ' + path)\n            path = join(distPath, path)\n            // Make sure the sub folders are created\n            yield mkdirp(dirname(path))\n            yield writeFile(path, html, 'utf8')\n          })\n        })\n      }\n    })\n  })\n  .then((pages) => {\n    // Add .nojekyll file to let Github Pages add the _nuxt/ folder\n    // https://help.github.com/articles/files-that-start-with-an-underscore-are-missing/\n    const nojekyllPath = resolve(distPath, '.nojekyll')\n    return writeFile(nojekyllPath, '')\n  })\n  .then(() => {\n    const duration = Math.round((Date.now() - s) / 100) / 10\n    debug(`HTML Files generated in ${duration}s`)\n    return this\n  })\n}\n\nfunction resolveRouteParams (routeParams) {\n  let promises = []\n  Object.keys(routeParams).forEach(function (routePath) {\n    let promise = promisifyRouteParams(routeParams[routePath])\n    promise.then((routeParamsData) => {\n      routeParams[routePath] = routeParamsData\n    })\n    .catch((e) => {\n      console.error(`Could not resolve routeParams[${routePath}]`) // eslint-disable-line no-console\n      console.error(e) // eslint-disable-line no-console\n      process.exit(1)\n    })\n    promises.push(promise)\n  })\n  return Promise.all(promises)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/generate.js","'use strict'\n\nconst debug = require('debug')('nuxt:render')\nimport co from 'co'\nimport { urlJoin, getContext } from './utils'\n// force blue color\ndebug.color = 4\n\nexport function render (req, res) {\n  if (!this.renderer && !this.dev) {\n    console.error('> No build files found, please run `nuxt build` before launching `nuxt start`') // eslint-disable-line no-console\n    process.exit(1)\n  }\n  /* istanbul ignore if */\n  if (!this.renderer) {\n    setTimeout(() => {\n      this.render(req, res)\n    }, 1000)\n    return\n  }\n  const self = this\n  const context = getContext(req, res)\n  return co(function * () {\n    if (self.dev) {\n      // Call webpack middleware only in development\n      yield self.webpackDevMiddleware(req, res)\n      yield self.webpackHotMiddleware(req, res)\n    }\n    // If base in req.url, remove it for the middleware and vue-router\n    if (self.options.router.base !== '/' && req.url.indexOf(self.options.router.base) === 0) {\n      // Compatibility with base url for dev server\n      req.url = req.url.replace(self.options.router.base, '/')\n    }\n    // Serve static/ files\n    yield self.serveStatic(req, res)\n    // Serve .nuxt/dist/ files (only for production)\n    if (!self.dev && self._nuxtRegexp.test(req.url)) {\n      const url = req.url\n      req.url = req.url.replace(self._nuxtRegexp, '/')\n      yield self.serveStaticNuxt(req, res)\n      /* istanbul ignore next */\n      req.url = url\n    }\n  })\n  .then(() => {\n    /* istanbul ignore if */\n    if (this.dev && this._nuxtRegexp.test(req.url) && req.url.includes('.hot-update.json')) {\n      res.statusCode = 404\n      return res.end()\n    }\n    return this.renderRoute(req.url, context)\n  })\n  .then(({ html, error }) => {\n    if (error) {\n      res.statusCode = context.nuxt.error.statusCode || 500\n    }\n    res.setHeader('Content-Type', 'text/html; charset=utf-8')\n    res.setHeader('Content-Length', Buffer.byteLength(html))\n    res.end(html, 'utf8')\n  })\n  .catch((err) => {\n    res.statusCode = 500\n    res.end(this.errorTemplate({ err }), 'utf8')\n  })\n}\n\nexport function renderRoute (url, context = {}) {\n  debug(`Rendering url ${url}`)\n  // Add url and isSever to the context\n  context.url = url\n  context.isServer = true\n  // Call rendertoSting from the bundleRenderer and generate the HTML (will update the context as well)\n  const self = this\n  return co(function * () {\n    let app = yield self.renderToString(context)\n    if (!context.nuxt.serverRendered) {\n      app = '<div id=\"__nuxt\"></div>'\n    }\n    const html = self.appTemplate({\n      dev: self.dev, // Use to add the extracted CSS <link> in production\n      baseUrl: self.options.router.base,\n      APP: app,\n      context: context,\n      files: {\n        css: urlJoin(self.options.router.base, '/_nuxt/', self.options.build.filenames.css),\n        vendor: urlJoin(self.options.router.base, '/_nuxt/', self.options.build.filenames.vendor),\n        app: urlJoin(self.options.router.base, '/_nuxt/', self.options.build.filenames.app)\n      }\n    })\n    return {\n      html,\n      error: context.nuxt.error,\n      redirected: context.redirected\n    }\n  })\n}\n\n// Function used to do dom checking via jsdom\nlet jsdom = null\nexport function renderAndGetWindow (url, opts = {}) {\n  /* istanbul ignore if */\n  if (!jsdom) {\n    try {\n      jsdom = require('jsdom')\n    } catch (e) {\n      console.error('Fail when calling nuxt.renderAndGetWindow(url)') // eslint-disable-line no-console\n      console.error('jsdom module is not installed') // eslint-disable-line no-console\n      console.error('Please install jsdom with: npm install --save-dev jsdom') // eslint-disable-line no-console\n      process.exit(1)\n    }\n  }\n  let virtualConsole = jsdom.createVirtualConsole().sendTo(console)\n  if (opts.virtualConsole === false) {\n    virtualConsole = undefined\n  }\n  url = url || 'http://localhost:3000'\n  return new Promise((resolve, reject) => {\n    jsdom.env({\n      url: url,\n      features: {\n        FetchExternalResources: ['script', 'link'],\n        ProcessExternalResources: ['script']\n      },\n      virtualConsole,\n      done (err, window) {\n        if (err) return reject(err)\n        // Mock window.scrollTo\n        window.scrollTo = function () {}\n        // If Nuxt could not be loaded (error from the server-side)\n        if (!window.__NUXT__) {\n          return reject({\n            message: 'Could not load the nuxt app',\n            body: window.document.getElementsByTagName('body')[0].innerHTML\n          })\n        }\n        // Used by nuxt.js to say when the components are loaded and the app ready\n        window.onNuxtReady(() => {\n          resolve(window)\n        })\n      }\n    })\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/render.js","'use strict'\n\nconst http = require('http')\n\nclass Server {\n\n  constructor (nuxt) {\n    this.nuxt = nuxt\n    this.server = http.createServer(this.render.bind(this))\n    return this\n  }\n\n  render (req, res) {\n    this.nuxt.render(req, res)\n    return this\n  }\n\n  listen (port, host) {\n    host = host || 'localhost'\n    port = port || 3000\n    this.server.listen(port, host, () => {\n      console.log('Ready on http://%s:%s', host, port) // eslint-disable-line no-console\n    })\n    return this\n  }\n\n  close (cb) {\n    return this.server.close(cb)\n  }\n\n}\n\nexport default Server\n\n\n\n// WEBPACK FOOTER //\n// ./lib/server.js","module.exports = require(\"ansi-html\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ansi-html\"\n// module id = 23\n// module chunks = 0","module.exports = require(\"serve-static\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"serve-static\"\n// module id = 24\n// module chunks = 0","'use strict'\n\nimport { each } from 'lodash'\nimport webpack from 'webpack'\nimport ExtractTextPlugin from 'extract-text-webpack-plugin'\nimport ProgressBarPlugin from 'progress-bar-webpack-plugin'\nimport { BundleAnalyzerPlugin } from 'webpack-bundle-analyzer'\nimport base from './base.config.js'\nimport { resolve } from 'path'\n/*\n|--------------------------------------------------------------------------\n| Webpack Client Config\n|\n| Generate public/dist/client-vendor-bundle.js\n| Generate public/dist/client-bundle.js\n|\n| In production, will generate public/dist/style.css\n|--------------------------------------------------------------------------\n*/\nexport default function () {\n  let config = base.call(this, { isClient: true })\n\n  // Entry\n  config.entry.app = resolve(this.dir, '.nuxt', 'client.js')\n\n  // Add vendors\n  if (this.options.store) {\n    config.entry.vendor.push('vuex')\n  }\n  config.entry.vendor = config.entry.vendor.concat(this.options.build.vendor)\n\n  // Output\n  config.output.path = resolve(this.dir, '.nuxt', 'dist')\n  config.output.filename = this.options.build.filenames.app\n\n  // env object defined in nuxt.config.js\n  let env = {}\n  each(this.options.env, (value, key) => {\n    env['process.env.' + key] = (typeof value === 'string' ? JSON.stringify(value) : value)\n  })\n  // Webpack plugins\n  config.plugins = (config.plugins || []).concat([\n    // strip comments in Vue code\n    new webpack.DefinePlugin(Object.assign(env, {\n      'process.env.NODE_ENV': JSON.stringify(this.dev ? 'development' : 'production'),\n      'process.BROWSER_BUILD': true,\n      'process.SERVER_BUILD': false\n    })),\n    // Extract vendor chunks for better caching\n    new webpack.optimize.CommonsChunkPlugin({\n      name: 'vendor',\n      filename: this.options.build.filenames.vendor\n    })\n  ])\n\n  // client bundle progress bar\n  config.plugins.push(\n    new ProgressBarPlugin()\n  )\n\n  // Production client build\n  if (!this.dev) {\n    config.plugins.push(\n      // Use ExtractTextPlugin to extract CSS into a single file\n      new ExtractTextPlugin({\n        filename: this.options.build.filenames.css,\n        allChunks: true\n      }),\n      // This is needed in webpack 2 for minifying CSS\n      new webpack.LoaderOptionsPlugin({\n        minimize: true\n      }),\n      // Minify JS\n      new webpack.optimize.UglifyJsPlugin({\n        compress: {\n          warnings: false\n        }\n      })\n    )\n  }\n  // Extend config\n  if (typeof this.options.build.extend === 'function') {\n    this.options.build.extend(config, {\n      dev: this.dev,\n      isClient: true\n    })\n  }\n  // Webpack Bundle Analyzer\n  if (!this.dev && this.options.build.analyze) {\n    let options = {}\n    if (typeof this.options.build.analyze === 'object') {\n      options = this.options.build.analyze\n    }\n    config.plugins.push(\n      new BundleAnalyzerPlugin(options)\n    )\n  }\n  return config\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/webpack/client.config.js","'use strict'\n\nimport webpack from 'webpack'\nimport base from './base.config.js'\nimport { each, uniq } from 'lodash'\nimport { existsSync, readFileSync } from 'fs'\nimport { resolve } from 'path'\n\n/*\n|--------------------------------------------------------------------------\n| Webpack Server Config\n|--------------------------------------------------------------------------\n*/\nexport default function () {\n  let config = base.call(this, { isServer: true })\n\n  // env object defined in nuxt.config.js\n  let env = {}\n  each(this.options.env, (value, key) => {\n    env['process.env.' + key] = (typeof value === 'string' ? JSON.stringify(value) : value)\n  })\n\n  config = Object.assign(config, {\n    target: 'node',\n    devtool: false,\n    entry: resolve(this.dir, '.nuxt', 'server.js'),\n    output: Object.assign({}, config.output, {\n      path: resolve(this.dir, '.nuxt', 'dist'),\n      filename: 'server-bundle.js',\n      libraryTarget: 'commonjs2'\n    }),\n    plugins: (config.plugins || []).concat([\n      new webpack.DefinePlugin(Object.assign(env, {\n        'process.env.NODE_ENV': JSON.stringify(this.dev ? 'development' : 'production'),\n        'process.BROWSER_BUILD': false,\n        'process.SERVER_BUILD': true\n      }))\n    ])\n  })\n\n  // Externals\n  const nuxtPackageJson = require('../../package.json')\n  const projectPackageJsonPath = resolve(this.dir, 'package.json')\n  config.externals = Object.keys(nuxtPackageJson.dependencies || {})\n  if (existsSync(projectPackageJsonPath)) {\n    try {\n      const projectPackageJson = JSON.parse(readFileSync(projectPackageJsonPath))\n      config.externals = config.externals.concat(Object.keys(projectPackageJson.dependencies || {}))\n    } catch (e) {}\n  }\n  config.externals = uniq(config.externals)\n\n  // Extend config\n  if (typeof this.options.build.extend === 'function') {\n    this.options.build.extend(config, {\n      dev: this.dev,\n      isServer: true\n    })\n  }\n  return config\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/webpack/server.config.js","'use strict'\n\nimport { defaults } from 'lodash'\n\nexport default function ({ isClient }) {\n  let babelOptions = JSON.stringify(defaults(this.options.build.babel, {\n    plugins: [\n      'transform-async-to-generator',\n      'transform-runtime'\n    ],\n    presets: [\n      ['es2015', { modules: false }],\n      'stage-2'\n    ]\n  }))\n  let config = {\n    postcss: this.options.build.postcss,\n    loaders: {\n      'js': 'babel-loader?' + babelOptions,\n      'less': 'vue-style-loader!css-loader!less-loader',\n      'sass': 'vue-style-loader!css-loader!sass-loader?indentedSyntax',\n      'scss': 'vue-style-loader!css-loader!sass-loader',\n      'stylus': 'vue-style-loader!css-loader!stylus-loader',\n      'styl': 'vue-style-loader!css-loader!stylus-loader'\n    },\n    preserveWhitespace: false\n  }\n\n  if (!this.dev && isClient) {\n    // Use ExtractTextPlugin to extract CSS into a single file\n    const ExtractTextPlugin = require('extract-text-webpack-plugin')\n    config.loaders.css = ExtractTextPlugin.extract({ loader: 'css-loader' })\n    config.loaders.scss = ExtractTextPlugin.extract({ loader: 'css-loader!sass-loader', fallbackLoader: 'vue-style-loader' })\n    config.loaders.sass = ExtractTextPlugin.extract({ loader: 'css-loader!sass-loader?indentedSyntax', fallbackLoader: 'vue-style-loader' })\n    config.loaders.stylus = ExtractTextPlugin.extract({ loader: 'css-loader!stylus-loader', fallbackLoader: 'vue-style-loader' })\n    config.loaders.less = ExtractTextPlugin.extract({ loader: 'css-loader!less-loader', fallbackLoader: 'vue-style-loader' })\n  }\n\n  // Return the config\n  return config\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/webpack/vue-loader.config.js","module.exports = {\n\t\"name\": \"nuxt\",\n\t\"version\": \"0.9.9\",\n\t\"description\": \"A minimalistic framework for server-rendered Vue.js applications (inspired by Next.js)\",\n\t\"contributors\": [\n\t\t{\n\t\t\t\"name\": \"Sebastien Chopin\"\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Alexandre Chopin\"\n\t\t}\n\t],\n\t\"main\": \"./index.js\",\n\t\"license\": \"MIT\",\n\t\"repository\": {\n\t\t\"type\": \"git\",\n\t\t\"url\": \"git+https://github.com/nuxt/nuxt.js\"\n\t},\n\t\"files\": [\n\t\t\"bin\",\n\t\t\"dist\",\n\t\t\"index.js\"\n\t],\n\t\"keywords\": [\n\t\t\"nuxt\",\n\t\t\"nuxt.js\",\n\t\t\"nuxtjs\",\n\t\t\"vue\",\n\t\t\"vue.js\",\n\t\t\"vuejs\",\n\t\t\"next.js\",\n\t\t\"vue ssr\"\n\t],\n\t\"homepage\": \"https://github.com/nuxt/nuxt.js#readme\",\n\t\"bin\": {\n\t\t\"nuxt\": \"./bin/nuxt\"\n\t},\n\t\"scripts\": {\n\t\t\"test\": \"nyc ava --serial test/\",\n\t\t\"coverage\": \"nyc report --reporter=text-lcov > coverage.lcov && codecov\",\n\t\t\"lint\": \"eslint --ext .js,.vue bin lib pages test/*.js --ignore-pattern lib/app\",\n\t\t\"build\": \"webpack\",\n\t\t\"watch\": \"webpack --watch\",\n\t\t\"precommit\": \"npm run lint\",\n\t\t\"prepublish\": \"npm run build\"\n\t},\n\t\"dependencies\": {\n\t\t\"ansi-html\": \"^0.0.7\",\n\t\t\"autoprefixer\": \"^6.7.0\",\n\t\t\"babel-core\": \"^6.22.1\",\n\t\t\"babel-loader\": \"^6.2.10\",\n\t\t\"babel-plugin-array-includes\": \"^2.0.3\",\n\t\t\"babel-plugin-transform-async-to-generator\": \"^6.22.0\",\n\t\t\"babel-plugin-transform-runtime\": \"^6.22.0\",\n\t\t\"babel-preset-es2015\": \"^6.22.0\",\n\t\t\"babel-preset-stage-2\": \"^6.22.0\",\n\t\t\"chokidar\": \"^1.6.1\",\n\t\t\"co\": \"^4.6.0\",\n\t\t\"css-loader\": \"^0.26.1\",\n\t\t\"debug\": \"^2.6.0\",\n\t\t\"extract-text-webpack-plugin\": \"2.0.0-beta.4\",\n\t\t\"file-loader\": \"^0.9.0\",\n\t\t\"fs-extra\": \"^2.0.0\",\n\t\t\"glob\": \"^7.1.1\",\n\t\t\"hash-sum\": \"^1.0.2\",\n\t\t\"html-minifier\": \"^3.2.3\",\n\t\t\"lodash\": \"^4.17.4\",\n\t\t\"lru-cache\": \"^4.0.2\",\n\t\t\"memory-fs\": \"^0.4.1\",\n\t\t\"path-to-regexp\": \"^1.7.0\",\n\t\t\"pify\": \"^2.3.0\",\n\t\t\"progress-bar-webpack-plugin\": \"^1.9.3\",\n\t\t\"serialize-javascript\": \"^1.3.0\",\n\t\t\"serve-static\": \"^1.11.1\",\n\t\t\"url-loader\": \"^0.5.7\",\n\t\t\"vue\": \"^2.1.10\",\n\t\t\"vue-loader\": \"^10.0.2\",\n\t\t\"vue-meta\": \"^0.5.3\",\n\t\t\"vue-router\": \"^2.1.3\",\n\t\t\"vue-server-renderer\": \"^2.1.10\",\n\t\t\"vue-template-compiler\": \"^2.1.10\",\n\t\t\"vuex\": \"^2.1.1\",\n\t\t\"webpack\": \"^2.2.0\",\n\t\t\"webpack-bundle-analyzer\": \"^2.2.1\",\n\t\t\"webpack-dev-middleware\": \"^1.9.0\",\n\t\t\"webpack-hot-middleware\": \"^2.15.0\"\n\t},\n\t\"devDependencies\": {\n\t\t\"ava\": \"^0.17.0\",\n\t\t\"babel-eslint\": \"^7.1.1\",\n\t\t\"codecov\": \"^1.0.1\",\n\t\t\"copy-webpack-plugin\": \"^4.0.1\",\n\t\t\"eslint\": \"^3.14.0\",\n\t\t\"eslint-config-standard\": \"^6.2.1\",\n\t\t\"eslint-plugin-html\": \"^1.7.0\",\n\t\t\"eslint-plugin-promise\": \"^3.4.0\",\n\t\t\"eslint-plugin-standard\": \"^2.0.1\",\n\t\t\"finalhandler\": \"^0.5.1\",\n\t\t\"jsdom\": \"^9.9.1\",\n\t\t\"json-loader\": \"^0.5.4\",\n\t\t\"nyc\": \"^10.1.2\",\n\t\t\"request\": \"^2.79.0\",\n\t\t\"request-promise-native\": \"^1.0.3\",\n\t\t\"webpack-node-externals\": \"^1.5.4\"\n\t}\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./package.json\n// module id = 28\n// module chunks = 0","module.exports = require(\"autoprefixer\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"autoprefixer\"\n// module id = 29\n// module chunks = 0","module.exports = require(\"babel-runtime/core-js/array/from\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/core-js/array/from\"\n// module id = 30\n// module chunks = 0","module.exports = require(\"chokidar\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"chokidar\"\n// module id = 31\n// module chunks = 0","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 32\n// module chunks = 0","module.exports = require(\"glob\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"glob\"\n// module id = 33\n// module chunks = 0","module.exports = require(\"hash-sum\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"hash-sum\"\n// module id = 34\n// module chunks = 0","module.exports = require(\"html-minifier\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"html-minifier\"\n// module id = 35\n// module chunks = 0","module.exports = require(\"http\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"http\"\n// module id = 36\n// module chunks = 0","module.exports = require(\"jsdom\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jsdom\"\n// module id = 37\n// module chunks = 0","module.exports = require(\"lru-cache\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lru-cache\"\n// module id = 38\n// module chunks = 0","module.exports = require(\"memory-fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"memory-fs\"\n// module id = 39\n// module chunks = 0","module.exports = require(\"path-to-regexp\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path-to-regexp\"\n// module id = 40\n// module chunks = 0","module.exports = require(\"progress-bar-webpack-plugin\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"progress-bar-webpack-plugin\"\n// module id = 41\n// module chunks = 0","module.exports = require(\"vue-server-renderer\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vue-server-renderer\"\n// module id = 42\n// module chunks = 0","module.exports = require(\"webpack-bundle-analyzer\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webpack-bundle-analyzer\"\n// module id = 43\n// module chunks = 0","module.exports = require(\"webpack-dev-middleware\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webpack-dev-middleware\"\n// module id = 44\n// module chunks = 0","module.exports = require(\"webpack-hot-middleware\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webpack-hot-middleware\"\n// module id = 45\n// module chunks = 0","'use strict'\n\nimport _ from 'lodash'\nimport co from 'co'\nimport fs from 'fs-extra'\nimport pify from 'pify'\nimport ansiHTML from 'ansi-html'\nimport serialize from 'serialize-javascript'\nimport Server from './server'\nimport * as build from './build'\nimport * as render from './render'\nimport generate from './generate'\nimport serveStatic from 'serve-static'\nimport { resolve, join } from 'path'\nimport * as utils from './utils'\nutils.setAnsiColors(ansiHTML)\n\nclass Nuxt {\n\n  constructor (options = {}) {\n    var defaults = {\n      dev: true,\n      env: {},\n      head: {},\n      plugins: [],\n      css: [],\n      cache: false,\n      loading: {\n        color: 'black',\n        failedColor: 'red',\n        height: '2px',\n        duration: 5000\n      },\n      transition: {\n        name: 'page',\n        mode: 'out-in'\n      },\n      router: {\n        base: '/',\n        middleware: [],\n        linkActiveClass: 'nuxt-link-active',\n        extendRoutes: null,\n        scrollBehavior: null\n      },\n      build: {}\n    }\n    // Sanitization\n    if (options.loading === true) delete options.loading\n    if (options.router && typeof options.router.middleware === 'string') options.router.middleware = [ options.router.middleware ]\n    if (typeof options.transition === 'string') options.transition = { name: options.transition }\n    this.options = _.defaultsDeep(options, defaults)\n    // Env variables\n    this.dev = this.options.dev\n    this.dir = (typeof options.rootDir === 'string' && options.rootDir ? options.rootDir : process.cwd())\n    this.srcDir = (typeof options.srcDir === 'string' && options.srcDir ? resolve(this.dir, options.srcDir) : this.dir)\n    // If store defined, update store options to true\n    if (fs.existsSync(join(this.srcDir, 'store'))) {\n      this.options.store = true\n    }\n    // If middleware defined, update middleware option to true\n    this.options.middleware = false\n    if (fs.existsSync(join(this.srcDir, 'middleware'))) {\n      this.options.middleware = true\n    }\n    // Template\n    this.appTemplate = _.template(fs.readFileSync(resolve(__dirname, 'views', 'app.html'), 'utf8'), {\n      imports: { serialize }\n    })\n    this.errorTemplate = _.template(fs.readFileSync(resolve(__dirname, 'views', 'error.html'), 'utf8'), {\n      imports: {\n        ansiHTML,\n        encodeHtml: utils.encodeHtml\n      }\n    })\n    // renderer used by Vue.js (via createBundleRenderer)\n    this.renderer = null\n    // For serving static/ files to /\n    this.serveStatic = pify(serveStatic(resolve(this.srcDir, 'static')))\n    // For serving .nuxt/dist/ files\n    this._nuxtRegexp = /^\\/_nuxt\\//\n    this.serveStaticNuxt = pify(serveStatic(resolve(this.dir, '.nuxt', 'dist')))\n    // Add this.Server Class\n    this.Server = Server\n    // Add this.build\n    build.options.call(this) // Add build options\n    this.build = () => co(build.build.bind(this))\n    // Add this.render and this.renderRoute\n    this.render = render.render.bind(this)\n    this.renderRoute = render.renderRoute.bind(this)\n    this.renderAndGetWindow = render.renderAndGetWindow.bind(this)\n    // Add this.generate\n    this.generate = generate.bind(this)\n    // Add this.utils (tests purpose)\n    this.utils = utils\n    return this\n  }\n\n  close (callback) {\n    let promises = []\n    /* istanbul ignore if */\n    if (this.webpackDevMiddleware) {\n      const p = new Promise((resolve, reject) => {\n        this.webpackDevMiddleware.close(() => resolve())\n      })\n      promises.push(p)\n    }\n    /* istanbul ignore if */\n    if (this.webpackServerWatcher) {\n      const p = new Promise((resolve, reject) => {\n        this.webpackServerWatcher.close(() => resolve())\n      })\n      promises.push(p)\n    }\n    /* istanbul ignore if */\n    if (this.pagesFilesWatcher) {\n      this.pagesFilesWatcher.close()\n    }\n    return co(function * () {\n      yield promises\n    })\n    .then(function () {\n      if (typeof callback === 'function') callback()\n    })\n  }\n\n}\n\nexport default Nuxt\n\n\n\n// WEBPACK FOOTER //\n// ./lib/nuxt.js"],"sourceRoot":""}